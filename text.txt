üöÄ D√©ploiement Laravel via Docker ‚Äì Mes erreurs et solutions

J‚Äôai voulu d√©ployer une application Laravel avec Docker en utilisant la configuration suivante :

Un conteneur pour Apache + PHP,

Un autre conteneur pour MySQL,

Mon projet Laravel mont√© depuis mon dossier local.

L‚Äôapplication fonctionnait parfaitement en local avec XAMPP, mais une fois pass√©e dans Docker, plusieurs erreurs sont apparues. Voici un retour d‚Äôexp√©rience avec les probl√®mes que j‚Äôai rencontr√©s et les solutions que j‚Äôai appliqu√©es.


 2. Erreur 403 Forbidden ‚Äì Apache
 Le probl√®me :
Apache me renvoyait l‚Äôerreur :

Forbidden You don't have permission to access this resource.

 Ce que j‚Äôai v√©rifi√© :
Le dossier racine n'√©tait pas bon (Apache servait /var/www/html au lieu de /var/www/html/public)

Les permissions Linux sur mes fichiers √©taient insuffisantes

Le module mod_rewrite n'√©tait pas activ√©

.htaccess n'√©tait pas pris en compte

 Les solutions appliqu√©es :
J‚Äôai chang√© le DocumentRoot dans Apache vers /var/www/html/public

J‚Äôai ajout√© un bloc <Directory> dans la config Apache :

<Directory /var/www/html/public>
    AllowOverride All
</Directory>

J‚Äôai activ√© mod_rewrite avec :

a2enmod rewrite

Et j‚Äôai donn√© les bons droits √† Laravel :

chmod -R 775 storage bootstrap/cache

 3. Le projet Laravel n‚Äôapparaissait pas dans le conteneur
 Le probl√®me :
Mon conteneur tournait bien, mais le projet Laravel n‚Äô√©tait pas l√†, ou vide. Le volume n‚Äô√©tait pas mont√© correctement.

Ce que j‚Äôai fait :
J‚Äôai v√©rifi√© que le montage √©tait bien fait dans mon docker-compose.yml :

volumes:
  - .:/var/www/html

Et je me suis assur√© que le dossier courant (.) contenait bien tout Laravel : artisan, app/, routes/, public/, etc. 
grace a :
docker compose exec laravel-app bash puis
ls -la /var/www/html et normalement nous devons avoir cette ligne (artisan
composer.json
routes/
public/
...
)



 4. Avertissement Apache : ServerName
 Le message :

AH00558: Could not reliably determine the server's fully qualified domain name
 Solution :
J‚Äôai simplement ajout√© dans mon Dockerfile :

RUN echo "ServerName localhost" >> /etc/apache2/apache2.conf



4.Configuration mise en place
a.Dockerfile (PHP 8.3 + Apache) :
pdo_mysql install√©

mod_rewrite activ√©

DocumentRoot vers /public

ServerName d√©fini

composer install√© depuis l‚Äôimage officielle PHP

b.docker-compose.yml :

2 services : laravel-app (Apache/PHP) + mysql

Volume mont√© : Laravel local ‚Üí /var/www/html

Port mapp√© : 8080:80

R√©seau priv√© : laravel

 R√©sultat final
Je peux acc√©der √† mon application Laravel sur : http://localhost:8080

J‚Äôex√©cute les commandes Artisan directement dans le conteneur

Ma base MySQL est disponible sur localhost:3307